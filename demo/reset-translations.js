const fs = require('fs');
const path = require('path');

const sourceDir = path.join(__dirname, 'source');

// List of French translation files to reset
const frenchFiles = [
    'fr.json',
    'fr.xml',
    'fr.arb',
    'fr.po',
    'fr.yaml',
    'fr.properties',
    'fr.csv'
];

console.log('üßπ Resetting French translation files...\n');

frenchFiles.forEach(file => {
    const filePath = path.join(sourceDir, file);

    if (fs.existsSync(filePath)) {
        // Determine empty content based on file type
        let emptyContent = '';

        if (file.endsWith('.json')) {
            emptyContent = '{\n\n}';
        } else if (file.endsWith('.arb')) {
            emptyContent = '{\n  "@@locale": "fr"\n}';
        } else if (file.endsWith('.xml')) {
            emptyContent = '<?xml version="1.0" encoding="utf-8"?>\n<resources>\n</resources>';
        } else if (file.endsWith('.po')) {
            // Generate proper PO file headers
            const now = new Date();
            const timestamp = now.toISOString().replace('T', ' ').replace(/\.\d{3}Z$/, '+0000');
            
            emptyContent = `# French translation file
# Generated by auto-translate-json-library
msgid ""
msgstr ""
"MIME-Version: 1.0\\n"
"Content-Type: text/plain; charset=UTF-8\\n"
"Content-Transfer-Encoding: 8bit\\n"
"Language: fr\\n"
"Language-Team: French\\n"
"Plural-Forms: nplurals=2; plural=(n > 1);\\n"
"POT-Creation-Date: ${timestamp}\\n"
"PO-Revision-Date: ${timestamp}\\n"
"X-Generator: auto-translate-json-library\\n"

`;
        } else if (file.endsWith('.yaml')) {
            // Generate empty YAML structure matching en.yaml
            emptyContent = `app:
  name: ""
  description: ""
menu:
  file: ""
  edit: ""
  view: ""
messages:
  success: ""
  error: ""
`;
        } else if (file.endsWith('.properties')) {
            // Generate empty properties structure matching en.properties
            emptyContent = `# Main settings
site.title=
site.description=
# Button labels
btn.submit=
btn.cancel=
# Messages
msg.welcome=
`;
        } else if (file.endsWith('.csv')) {
            emptyContent = '';
        }

        fs.writeFileSync(filePath, emptyContent, 'utf8');
        console.log(`‚úÖ Reset ${file}`);
    } else {
        console.log(`‚ö†Ô∏è  ${file} not found, skipping`);
    }
});

console.log('\n‚ú® All French translation files have been reset!');
console.log('You can now run the demo again with: node run-demo.js');
